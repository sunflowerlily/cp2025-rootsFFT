## **Trae 项目规则：为 GitHub Classroom 创建每周计算作业**

**总体目标：** 协助我（老师）为每周的课程主题创建包含多个项目（通常3-5个）的 GitHub Classroom 作业。每个项目旨在帮助学生练习课程中讲授的特定知识点。你需要为每个项目以及整个周作业生成一套完整的、结构化的文件。

**一、基本原则与沟通：**

1.  **主题驱动：** 我会首先提供每周的**核心主题**（例如：“数值积分方法”、“常微分方程初值问题”、“蒙特卡洛模拟基础”）。
2.  **项目定义：** 针对该主题，我会指定**项目数量**（例如3个项目）以及每个项目的**简要名称或核心任务**（例如，项目1：“实现梯形法则和辛普森法则”，项目2：“用龙格-库塔法解洛伦兹方程”，项目3：“用投点法计算圆周率”）。
3.  **逐步生成，迭代优化：** 我们将首先专注于**单个项目**的完整材料生成。完成一个项目后，我会审查并可能要求修改，然后我们再进行下一个项目。所有项目完成后，再生成周作业的顶层文件。
4.  **Python 核心：** 所有代码（参考答案、学生模板、测试代码、自动评分脚本）均使用 Python 3.x。
5.  **清晰与简洁：** 所有文档（项目说明、实验报告模板）应清晰、简洁，避免不必要的冗长。
6.  **占位符使用：** 在生成内容时，请使用明确的占位符，如 `[PROJECT_NAME]`, `[FUNCTION_TO_IMPLEMENT]`, `[EXPECTED_VALUE]`, `[POINTS_AVAILABLE]` 等，方便我后续审查和微调。
7.  **一致性：** 在所有项目和文件中保持命名约定、结构和风格的一致性。

**二、每周作业的整体结构与文件：**

*   **顶层目录结构示例：**
    ```
    WEEKLY_ASSIGNMENT_ROOT/
    ├── .github/
    │   └── classroom/
    │       └── autograding.json  (由autograding.py的输出来配置，或者直接是autograding.py)
    │       └── autograding.py
    ├── PROJECT_1_NAME/
    │   ├── solution/
    │   │   └── solution.py  (或与项目名相关，如 project_1_solution.py)
    │   ├── tests/
    │   │   └── test_project_1.py
    │   ├── project_1_student.py (学生代码模板)
    │   ├── 项目说明.md
    │   └── 实验报告模板.md
    ├── PROJECT_2_NAME/
    │   ├── ... (同上)
    ├── ...
    ├── requirements.txt
    └── README.md (每周作业总说明)
    ```

**三、针对每个项目需生成的文件及具体要求：**

1.  **项目说明文档 (`[PROJECT_NAME]/项目说明.md`)**
    *   **格式：** Markdown。
    *   **内容：**
        *   **项目介绍：** 简要介绍项目背景、相关的物理概念或计算方法，以及学习目标。
        *   **项目任务：** 清晰、分点列出学生需要完成的具体任务。每个任务应尽可能对应学生代码模板中的一个或多个待实现函数/部分。明确输入、输出和期望行为。
        *   **(可选) 提示与资源：** 必要的公式、算法伪代码、或推荐阅读材料的链接。

2.  **参考答案代码 (`[PROJECT_NAME]/solution/solution.py` 或 `[PROJECT_NAME]/solution/[PROJECT_NAME]_solution.py`)**
    *   **目的：** 提供该项目的完整、正确的实现。
    *   **要求：**
        *   代码应正确无误，能够通过 `tests/` 目录下的所有测试。
        *   代码风格良好（PEP 8），包含清晰的注释，解释关键步骤和逻辑。
        *   如果涉及数值方法，应展示良好的实现技巧（例如，向量化操作 `numpy`）。
        *   函数和变量命名清晰。

3.  **学生代码模板 (`[PROJECT_NAME]/[PROJECT_NAME]_student.py`)**
    *   **目的：** 学生在此文件基础上填写代码。
    *   **要求：**
        *   包含所有学生需要实现的函数骨架，函数签名应完整。
        *   在每个待实现的函数内部或关键位置，使用明确的占位符或注释提示，例如：
            ```python
            def solve_equation(params):
                # TODO: 在此实现方程求解逻辑 (大约 [X] 行代码)
                # [STUDENT_CODE_HERE]
                raise NotImplementedError("请在 {} 中实现此函数。".format(__file__))
                return result
            ```
        *   预置必要的导入语句 (`import numpy as np`, etc.)。
        *   包含详细的文档字符串 (docstrings)，解释函数的功能、参数、返回值。
        *   可以包含一些辅助代码或学生不需要修改的设置代码。

4.  **项目测试代码 (`[PROJECT_NAME]/tests/test_[PROJECT_NAME].py`)**
    *   **框架：** 优先使用 `unittest` 模块（Python标准库），或 `pytest`（如果我指定）。
    *   **目的：**
        *   验证参考答案代码的正确性（所有测试必须通过）。
        *   用于测试学生提交的代码，并为自动评分提供依据。
    *   **要求：**
        *   测试用例应覆盖典型情况、边界条件和潜在的错误情况。
        *   每个测试方法应尽可能独立，测试项目任务中的一个具体方面或函数。
        *   测试方法命名清晰，能反映其测试内容（例如 `test_function_A_with_positive_input`）。
        *   使用断言 (`self.assertEqual`, `self.assertAlmostEqual`, `self.assertTrue`, etc.）来验证结果。对于浮点数比较，务必使用 `assertAlmostEqual` 或类似方法并指定容差。
        *   **(自动评分关联)** 测试方法可以通过特定的命名约定或装饰器（如果使用 `pytest` 并自定义）来关联到评分点。例如，测试方法名可以包含 `_points_[X]` 来指示该测试通过值多少分。

5.  **实验报告模板 (`[PROJECT_NAME]/实验报告模板.md`)**
    *   **格式：** Markdown。
    *   **目的：** 指导学生记录和分析实验结果，风格简洁。
    *   **内容结构：**
        *   **1. 实验目的简述：** (可从项目说明中提炼)
        *   **2. 方法简述：** (学生简要描述自己实现核心算法的思路)
        *   **3. 实验结果：**
            *   提示学生粘贴关键的输出数据、图表（如果适用）。
            *   针对图表，要求有标题、轴标签、图例。
            *   例如：“请在此处粘贴任务X生成的图表，并简要说明图表内容。”
        *   **4. 分析与讨论：**
            *   引导学生分析结果的正确性、误差来源（如果适用）。
            *   与理论预期进行比较。
            *   讨论遇到的问题及解决方法。
            *   (针对特定项目) 提出1-2个引导性思考题。
        *   **5. 结论：** 简要总结。
        *   **(可选) 核心代码片段：** 提示学生粘贴自己实现的最核心部分代码（少量）。

**四、顶层文件生成要求：**

1.  **自动评分脚本 (`.github/classroom/autograding.py`)**
    *   **目的：** 此脚本由 GitHub Classroom Actions 调用，用于运行所有项目的测试并汇总分数。
    *   **逻辑：**
        *   能够自动发现所有项目目录下的 `tests/` 文件夹。
        *   逐个项目运行其测试脚本（例如，使用 `unittest.TextTestRunner` 或 `pytest` 命令行）。
        *   捕获每个测试用例的通过/失败状态，并根据预设规则（例如，测试方法名中的点数、或测试类/模块的预设点数）计算得分。
        *   处理学生代码可能引发的运行时错误（例如，`try-except` 块包裹测试运行），确保即使一个项目测试失败，脚本也能继续测试其他项目。
        *   **输出：** 最终输出一个 JSON 对象到标准输出，格式符合 GitHub Classroom Autograding 的要求。该JSON通常包含一个 `tests` 数组，每个元素代表一个评分项/测试组，包含 `name`, `status`, `score`, `max_score`, `output` 等字段。
            ```json
            // 示例 autograding.json 结构 (autograding.py 的输出)
            {
              "tests": [
                {
                  "name": "项目1: 梯形法则精度测试",
                  "setup": "",
                  "run": "python -m unittest discover -s PROJECT_1_NAME/tests -p 'test_*.py'", // 示例命令
                  "input": "",
                  "output": "捕获的测试输出...",
                  "comparison": "exact", // 或其他
                  "points": 10, // 该测试组的总分
                  "status": "pass" // 或 "fail"
                },
                // ... 更多测试组
              ]
            }
            ```
            *你可以简化 `autograding.py` 的逻辑，让它调用每个 `test_project_X.py` 并解析其输出（如果测试脚本本身能输出分数信息）。或者，`autograding.py` 负责主要的计分逻辑。*

2.  **依赖文件 (`requirements.txt`)**
    *   列出所有项目共用的 Python 包及其版本（例如 `numpy>=1.20`, `scipy>=1.7`, `matplotlib>=3.4`）。
    *   请基于项目中实际 `import` 的库来生成，或询问我需要包含哪些。

3.  **每周作业总说明 (`README.md`)**
    *   **格式：** Markdown。
    *   **内容：**
        *   **周次与主题：** 例如，“第三周作业：数值积分与应用”。
        *   **学习目标：** 本周作业希望学生掌握的整体知识点。
        *   **项目列表：**
            *   列出本周包含的所有项目名称。
            *   为每个项目提供一个简短描述和指向其项目文件夹内 `项目说明.md` 的链接。
            *   例如：
                *   `1. [项目1：实现梯形法则](./PROJECT_1_NAME/项目说明.md) - 学习并实现基本的数值积分方法。`
                *   `2. [项目2：高斯求积](./PROJECT_2_NAME/项目说明.md) - 探索更高效的积分技巧。`
        *   **提交截止日期：** `[DUE_DATE]` (占位符)
        *   **提交说明：** 简要说明如何在 GitHub Classroom 上提交作业。
        *   **(可选) 注意事项或通用提示。**

**五、与 Trae 的交互流程建议：**

1.  **启动：** 我说：“你好 Trae，我们来准备第 [X] 周的计算物理作业，主题是：[WEEKLY_TOPIC]。”
2.  **项目规划：** 我会告诉你这周有几个项目，以及每个项目的初步名称/构思。
3.  **逐项目生成：**
    *   我说：“我们先来做项目：[PROJECT_NAME_1]。”
    *   你根据上述规则，为 [PROJECT_NAME_1] 生成：`项目说明.md`, `solution/project_1_solution.py`, `project_1.py`, `tests/test_project_1.py`, `实验报告.md`。
    *   我会审查，并可能要求你修改某部分。例如：“`test_project_1.py` 中关于边界条件的测试不够，请补充。” 或 “`项目说明.md` 中的任务2描述不够清晰，请重写。”
4.  **重复步骤3** 直到所有项目材料生成完毕。
5.  **生成顶层文件：** 我说：“所有项目都好了，现在请生成顶层的 `requirements.txt`，周作业的 `README.md`，以及 `.github/classroom/autograding.py` 脚本。”
    *   对于 `autograding.py`，你可能需要询问我每个项目/测试组的具体计分方式。
